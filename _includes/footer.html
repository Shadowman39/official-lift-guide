<script src="{{site.baseurl}}/assets/gitbook/gitbook.js"></script>
<script src="{{site.baseurl}}/assets/gitbook/theme.js"></script>

<script src="{{site.baseurl}}/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
<script src="{{site.baseurl}}/assets/gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
<script src="{{site.baseurl}}/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.js"></script>
<script src="{{site.baseurl}}/assets/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="{{site.baseurl}}/assets/gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
<script src="{{site.baseurl}}/assets/gitbook/gitbook-plugin-search-pro/search.js"></script>
<script src="{{site.baseurl}}/assets/gitbook/gitbook-plugin-sharing/buttons.js"></script>
<script src="{{site.baseurl}}/assets/gitbook/gitbook-plugin-splitter/splitter.js"></script>
<script src="{{site.baseurl}}/assets/custom.js"></script>

<!--
<script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script>
-->

{% if site.extra_footer_js %}
    {%- for extra_js in site.extra_header_js -%}
        {%- assign starts_with = extra_js | slice: 0,4  -%}
        {% if starts_with == "http" %}
<script src="{{ extra_js }}"></script>
        {%- else -%}
<script src="{{site.baseurl}}/{{ extra_js }}"></script>
        {%- endif -%}
    {%- endfor -%}
{% endif %}

{%- if site.tracker -%}
    <!-- trackers -->
    {%- if site.tracker.cnzz -%}
        <!-- cnzz -->
        {%- include cnzz.html -%}
    {%- endif -%}
{%- endif -%}

<script>
  // This is all just to get scrollbars to appear on pages other than the intro page.
  // This function checks the current URL and adds or removes our class.
  function manageIntroPageClass() {
    // The Liquid tag gets the correct base path to your homepage.
    const homePath = '{{ "/" | relative_url }}';
    const currentPath = window.location.pathname;
    const $body = $('body');

    // Check if the current path is the homepage.
    if (currentPath === homePath || currentPath.endsWith(homePath + 'index.html')) {
      // We are on the intro page, so ENSURE the class is present.
      $body.addClass('intro-page');
    } else {
      // We are on any other page, so REMOVE the class.
      $body.removeClass('intro-page');
    }
  }

  // --- This is the key to working WITH the GitBook theme ---
  // The 'page.change' event fires every time the theme finishes loading a new page
  // via its internal (Turbolinks-like) navigation system.
  if (window.gitbook) {
    gitbook.events.on('page.change', function() {
      // Run our class manager function after the theme has done its work.
      manageIntroPageClass();
    });
  }

  // We also run it once on document ready to handle the very first page
  // load correctly, in case there are any timing issues.
  $(document).ready(function() {
    manageIntroPageClass();
  });
</script>